<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>

        // CALLBACK
        // console.log("Start");

        // function loginUser(email, password, callback) {
        //     setTimeout(() => {
        //         console.log("The data");
        //         callback({ userEmail: email })
        //     }, 3000)
        // }

        // function getUserVideos(email, callback) {
        //     setTimeout(() => {
        //         callback(["video1", "video2", "video3"]);
        //     }, 2000)
        // }

        // function videoDetails(video, callback) {
        //     setTimeout(() => {
        //         callback("Title")
        //     }, 2000)
        // }

        // const user = loginUser("dddd@gmail.com", 12345, user => {
        //     console.log(user);
        //     getUserVideos(user.email, (videos) => {
        //         console.log(videos);
        //         videoDetails(videos[0], title => {
        //             console.log(title)
        //         })
        //     })
        // })

        // console.log("Finish")


        // PROMISE
        // const promise = new Promise((resolve, reject) => {
        //     setTimeout(() => {
        //         console.log("got the user")
        //         // resolve({ user: "john" })
        //         reject(new Error("User not logged in"))
        //     }, 2000)
        // })

        // promise.then(user => {
        //     console.log(user)
        // })
        //     // .catch(err => console.log(err))
        //     .catch(err => console.log(err.message))


        // function loginUser(email, password) {
        //     return new Promise((resolve, reject) => {
        //         setTimeout(() => {
        //             console.log("The data");
        //             resolve({ userEmail: email })
        //         }, 3000)
        //     })
        // }

        // function getUserVideos(email) {
        //     return new Promise((resolve, reject) => {
        //         setTimeout(() => {
        //             resolve(["video1", "video2", "video3"]);
        //         }, 2000)
        //     })
        // }

        // function videoDetails(video) {
        //     return new Promise((resolve, reject) => {
        //         setTimeout(() => {
        //             resolve("Title")
        //         }, 2000)
        //     })
        // }

        // loginUser("ggg", 12345)
        // .then(user => getUserVideos(user.email))
        // .then(videos => videoDetails(videos[0]))
        // .then(details => console.log(details))


        // ASYNC / AWAIT
        const yt = new Promise(resolve => {
            setTimeout(() => {
                console.log("getting data")
                resolve({ videos: [1, 2, 3, 4] })
            }, 2000)
        })

        const fb = new Promise(resolve => {
            setTimeout(() => {
                console.log("getting data")
                resolve({ user: "name" })
            }, 3000)
        })

        Promise.all([yt, fb])
            .then(result => console.log(result))

        function loginUser(email, password) {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    console.log("The data");
                    resolve({ userEmail: email })
                }, 3000)
            })
        }

        function getUserVideos(email) {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    resolve(["video1", "video2", "video3"]);
                }, 2000)
            })
        }

        function videoDetails(video) {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    resolve("Title")
                }, 2000)
            })
        }

        loginUser("ggg", 12345)
            .then(user => getUserVideos(user.email))
            .then(videos => videoDetails(videos[0]))
            .then(details => console.log(details))

        async function displayUser() {
            try {
                const loggedUser = await loginUser("ggg", 12345);
                const videos = await getUserVideos(loggedUser.userEmail)
                const detail = await videoDetails(videos[0])
                console.log(detail)
            }
            catch (err) {
                console.log("Error")
            }
        }

        displayUser();
    </script>
</body>

</html>